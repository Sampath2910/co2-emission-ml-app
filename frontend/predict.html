<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CO₂ Prediction</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="assets/styles.css">
</head>

<body>

<!-- Navigation -->
<nav class="navbar">
    <a href="index.html">Home</a>
    <a href="predict.html">Predict</a>
    <a href="compare.html">Compare</a>
    <a href="awareness.html">Awareness</a>
    <a href="about.html">About</a>
</nav>

<div class="container fade-in">

    <section class="section">
        <h2>Predict Vehicle CO₂ Emissions</h2>
        <p class="muted">
            Enter vehicle specifications to receive a real-time carbon emission estimate.
        </p>

        <div class="features">

            <!-- Input Card -->
            <div class="card">

                <label>Engine Size (Litres)</label>
                <input type="number" id="engineSize" step="0.1" placeholder="e.g. 2.0">

                <label>Number of Cylinders</label>
                <input type="number" id="cylinders" placeholder="e.g. 4">

                <label>Fuel Consumption (L / 100 km)</label>
                <input type="number" id="fuelConsumption" step="0.1" placeholder="e.g. 8.5">

                <label>Fuel Type</label>
                <select id="fuelType">
                    <option value="X">Petrol</option>
                    <option value="Z">Diesel</option>
                    <option value="E">Ethanol</option>
                    <option value="N">Natural Gas</option>
                </select>

                <button onclick="predictCO2()">Predict Emissions</button>

                <div class="error" id="errorMsg"></div>
            </div>

            <!-- Result Card -->
            <div class="card result" id="resultBox" style="display:none;">
                <h3>Prediction Result</h3>
                <p><strong>CO₂ Emission:</strong> <span id="co2Value"></span> g/km</p>
                <p><strong>Category:</strong> <span id="rating"></span></p>
                <p><strong>Status:</strong> <span id="alert"></span></p>
            </div>

        </div>
    </section>

</div>

<footer>
    © 2026 CO₂ Emission Prediction • Sustainability Through AI
</footer>

<script>
function predictCO2() {

    const errorBox = document.getElementById("errorMsg");
    const resultBox = document.getElementById("resultBox");

    errorBox.style.display = "none";
    resultBox.style.display = "none";

    const engineSize = parseFloat(document.getElementById("engineSize").value);
    const cylinders = parseInt(document.getElementById("cylinders").value);
    const fuelConsumption = parseFloat(document.getElementById("fuelConsumption").value);
    const fuelType = document.getElementById("fuelType").value;

    if (isNaN(engineSize) || engineSize <= 0) {
        showError("Please enter a valid engine size.");
        return;
    }
    if (isNaN(cylinders) || cylinders <= 0) {
        showError("Please enter a valid number of cylinders.");
        return;
    }
    if (isNaN(fuelConsumption) || fuelConsumption <= 0) {
        showError("Please enter a valid fuel consumption value.");
        return;
    }

    const data = {
        "Engine Size(L)": engineSize,
        "Cylinders": cylinders,
        "Fuel Consumption Comb (L/100 km)": fuelConsumption,
        "Fuel Type": fuelType
    };

    fetch("/predict", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
    })
    .then(async response => {
        const result = await response.json();
        if (!response.ok) {
            throw new Error(result.error || "Prediction failed");
        }
        return result;
    })
    .then(result => {
        resultBox.style.display = "block";
        document.getElementById("co2Value").innerText = result.predicted_co2_gkm;
        document.getElementById("rating").innerText = result.rating;
        document.getElementById("alert").innerText = result.alert;
    })
    .catch(error => {
        showError(error.message);
    });
}

function showError(message) {
    const errorBox = document.getElementById("errorMsg");
    errorBox.innerText = message;
    errorBox.style.display = "block";
}
</script>

</body>
</html>
